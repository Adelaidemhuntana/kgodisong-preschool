<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/eye-dental.css">
    <title>Eye & Dental Check-ups - Kgodisong Preschool</title>

    <style>
        /* Smooth animation for AI-style confirmation */
        #successMessage {
            display: none;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            margin-top: 15px;
        }
        #successMessage.show {
            opacity: 1;
        }
        #successMessage div {
            animation: fadeIn 0.8s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

<div class="header">
    ğŸ‘€ğŸ¦· Eye & Dental Check-Up Booking
</div>

<div class="container">
    <div class="cute-card">
        <form id="checkupForm">
            <label>Child's Full Name</label>
            <input type="text" id="childName" name="child_name" required>

            <label>Parent Email</label>
            <input type="email" id="email" name="parent_email" required>

            <label>Select Type of Check-up</label>
            <select id="checkType" name="check_type" required>
                <option value="">-- Choose Option --</option>
                <option value="Eye Check-up">Eye Check-up ğŸ‘ï¸</option>
                <option value="Dental Check-up">Dental Check-up ğŸ¦·</option>
                <option value="Both Eye & Dental">Both Eye & Dental ğŸ‘ï¸ğŸ¦·</option>
            </select>

            <label>Preferred Date</label>
            <input type="date" id="date" name="date" required>

            <button class="btn" type="submit">Book Appointment</button>
        </form>

        <div id="successMessage" class="success"></div>
    </div>

    <div class="footer">
        Kgodisong Preschool
    </div>
</div>

<script>
    const form = document.getElementById("checkupForm");
    const message = document.getElementById("successMessage");

    form.addEventListener("submit", function (e) {
        e.preventDefault();

        const formData = new FormData(form);

        fetch("/api/checkup-booking", {
            method: "POST",
            body: formData
        })
        .then(res => res.json())
        .then(data => {
            if (data.status === "success") {
                const childName = document.getElementById("childName").value;
                const checkType = document.getElementById("checkType").value;
                const date = document.getElementById("date").value;

                message.innerHTML = `
                    <div class="p-3 border rounded shadow-sm bg-light">
                        <strong class="text-success">âœ” Booking Confirmed</strong><br>
                        Reference: <strong>${data.reference}</strong><br>
                        Child: <strong>${childName}</strong><br>
                        Check Type: <strong>${checkType}</strong><br>
                        Date: <strong>${date}</strong><br><br>
                        <small class="text-muted">
                            ğŸ©º <strong>AI Health Dispatcher</strong> has securely transmitted this booking
                            to <strong>Medi-clinic</strong> for review.<br>
                            You will receive a follow-up via email at <strong>${data.parent_email}</strong>.
                        </small>
                    </div>
                `;
                message.style.display = "block";
                message.classList.add("show");

                form.reset();
            }
        })
        .catch(err => console.error(err));
    });
</script>

</body>
</html>
